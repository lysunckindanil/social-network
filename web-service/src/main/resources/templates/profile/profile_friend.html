<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${profile.getUsername()}"></title>
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body>

<header th:replace="~{fragments/nav::nav(${username})}"></header>


<article>

    <h1>Profile</h1>
    <p>Username: <span th:text="${profile.getUsername()}"></span></p>
    <p>Email: <span th:text="${profile.getEmail()}"></span></p>
    <p>PhotoUrl: <span th:text="${profile.getPhotoUrl()}"></span></p>
    <form method="post" th:action="@{/subscribing/unsubscribe}">
        <button type="submit" name="to_be_unsubscribed" th:value="${profile.getUsername()}">Unsubscribe</button>
    </form>

    <div th:if="${!subscribing.isEmpty()}">
        <h1>Subscribed on</h1>
        <div th:each="sub: ${subscribing}">
            <a th:href="@{'/profile/'+ ${sub.getUsername()}}" th:text="${sub.getUsername()}"></a>
            <p th:text="${sub.getEmail()}"></p>
            <br>
        </div>
    </div>

    <div th:if="${!subscribed.isEmpty()}">
        <h1>Subscribed by</h1>
        <div th:each="sub: ${subscribed}">
            <a th:href="@{'/profile/'+ ${sub.getUsername()}}" th:text="${sub.getUsername()}"></a>
            <p th:text="${sub.getEmail()}"></p>
            <br>
        </div>
    </div>

    <div th:if="${!posts.isEmpty()}">
        <h1>Posts</h1>
        <div class="post" th:each="post: ${posts}">
            <h3>Label: <span th:text="${post.getLabel()}"></span></h3>
            <p>Content: <span th:text="${post.getContent()}"></span></p>
            <p>CreatedAt: <span th:text="${post.getCreatedAt()}"></span></p>
        </div>
    </div>
</article>
</body>
</html>